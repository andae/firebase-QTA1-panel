<div class="content-heading">
<div class="pull-right">
    <label for="image-input" class="file-upload">
      <a><button class="btn btn-warning" (click)="generateInvoice()"><em class="fa fa-print"></em>&nbsp;&nbsp;Invoice</button> </a>  
    </label>
 </div>
 <small><a [routerLink]=" ['/home'] ">Beranda</a> ->
        <a [routerLink]="['/order/allOrder']"> Pemesanan </a>->
            Rincian Pesanan Toko
 </small>
</div>
<div *ngIf="orderDetails.cart">
<div class="panel panel-default">
    <div class="panel-heading">Informasi Pemesanan</div>
    <div class="panel-body">
        <div class="row">
            <div class="col-md-6">
                <p class="lead bb">Rincian</p>
                <form class="form-horizontal p-20">
                    <div class="form-group">
                        <div class="col-sm-4">Tanggal Pemesanan:</div>
                        <div class="col-sm-8">
                            <strong>{{orderDetails.createdAt | date:'medium'}}</strong>
                        </div>
                    </div>
                    <div class="form-group">
                        <div class="col-sm-4">Nama Klien:</div>
                        <div class="col-sm-8">
                            <strong>{{userDetails.name}}</strong>
                        </div>
                    </div>
                    <div class="form-group">
                        <div class="col-sm-4">Items:</div>
                        <div class="col-sm-8">
                            <strong>{{orderDetails.cart.length}}</strong>
                        </div>
                    </div>
                    <div class="form-group">
                        <div class="col-sm-4">Jumlah:</div>
                        <div class="col-sm-8">
                            <strong>Rp {{orderDetails.grandTotal |number}}</strong>
                        </div>
                    </div>
                    <div class="form-group">
                        <div class="col-sm-4">Status</div>
                        <div class="col-sm-8">
                     <span class="label label-success" *ngIf="orderDetails.status=='Delivered'">{{orderDetails.status}}
                    </span>
                    <span class="label label-warning" *ngIf="orderDetails.status =='pending'">{{orderDetails.status}}</span>
                    <span class="label label-purple" *ngIf="orderDetails.status=='On the Way'">{{orderDetails.status}}
                    </span>
                    <span class="label label-danger" *ngIf="orderDetails.status=='Canceled'">{{orderDetails.status}}</span>
                    </div>
                    </div>
                </form>
            </div>
            <div class="col-md-6">
                <p class="lead bb">Klien</p>
                <form class="form-horizontal p-20">
                    <div class="form-group">
                        <div class="col-sm-4">Nama:</div>
                        <div class="col-sm-8">
                            <strong>{{userDetails.name}}</strong>
                        </div>
                    </div>
                    <div class="form-group">
                        <div class="col-sm-4">Email:</div>
                        <div class="col-sm-8">
                            <strong>{{userDetails.email}}</strong>
                        </div>
                    </div>
                    <div class="form-group">
                        <div class="col-sm-4">Telepon:</div>
                        <div class="col-sm-8">
                            <strong>{{userDetails.mobileNo}}</strong>
                        </div>
                    </div>
                </form>
            </div>
        </div>
        <div class="row">
            <div class="col-md-6">
                <p class="lead bb">Alamat Pembayaran</p>
                <form class="form-horizontal p-20">
                    <div class="form-group">
                        <div class="col-sm-4">Nama Lengkap:</div>
                        <div class="col-sm-8">
                            <strong>{{address.name}}</strong>
                        </div>
                    </div>
                    <div class="form-group">
                        <div class="col-sm-4">Alamat:</div>
                        <div class="col-sm-8">
                            <strong>{{address.address}}</strong>
                        </div>
                    </div>
                    <div class="form-group">
                        <div class="col-sm-4">Kota:</div>
                        <div class="col-sm-8">
                            <strong>{{address.city}}</strong>
                        </div>
                    </div>
                    <div class="form-group">
                        <div class="col-sm-4">ZIP/Kode POS:</div>
                        <div class="col-sm-8">
                            <strong>{{address.pincode}}</strong>
                        </div>
                    </div>
                    <div class="form-group">
                        <div class="col-sm-4">Telepon:</div>
                        <div class="col-sm-8">
                            <strong>{{address.mobileNo}}</strong>
                        </div>
                    </div>
                </form>
            </div>
            <div class="col-md-6">
                <p class="lead bb">Alamat Pengiriman</p>
                <form class="form-horizontal p-20">
                     <div class="form-group">
                        <div class="col-sm-4">Nama Lengkap:</div>
                        <div class="col-sm-8">
                            <strong>{{address.name}}</strong>
                        </div>
                    </div>
                    <div class="form-group">
                        <div class="col-sm-4">Alamat:</div>
                        <div class="col-sm-8">
                            <strong>{{address.address}}</strong>
                        </div>
                    </div>
                    <div class="form-group">
                        <div class="col-sm-4">Kota:</div>
                        <div class="col-sm-8">
                            <strong>{{address.city}}</strong>
                        </div>
                    </div>
                    <div class="form-group">
                        <div class="col-sm-4">ZIP/Kode POS:</div>
                        <div class="col-sm-8">
                            <strong>{{address.pincode}}</strong>
                        </div>
                    </div>
                    <div class="form-group">
                        <div class="col-sm-4">Telepon:</div>
                        <div class="col-sm-8">
                            <strong>{{address.mobileNo}}</strong>
                        </div>
                    </div>
                </form>
            </div>
        </div>

        <div class="row">
            <div class="col-md-12">
                <p class="lead bb">Rincian Pembayaran</p>
                <form class="form-horizontal p-20">
                  <div class="col-md-4">
                    <div class="form-group">
                        <div class="col-sm-4">Total :</div>
                        <div class="col-sm-8">
                            <strong>Rp {{orderDetails.subTotal|number}}</strong>
                        </div>
                    </div>
                  </div>
                  
                  <!-- <div class="col-md-4">
                    <div class="form-group">
                        <div class="col-sm-4">Diskon:</div>
                        <div class="col-sm-8">
                            <strong>
                                Rp {{orderDetails.deductedPrice|number}}
                            </strong>
                        </div>
                    </div>
                  </div> -->

                  <div class="col-md-4" *ngIf="orderDetails.usedLoyaltyPoints">
                    <div class="form-group">
                        <div class="col-sm-6">Used loyalty Points:</div>
                        <div class="col-sm-6">
                            <strong>Rp {{orderDetails.usedLoyaltyPoints|number}}</strong>
                        </div>
                    </div>
                  </div>
                  <div class="col-md-4">
                    <div class="form-group">
                        <div class="col-sm-2">PPN (10%):</div>
                        <div class="col-sm-8">
                            <strong>Rp {{orderDetails.tax|number}}</strong>
                        </div>
                    </div>
                  </div>
                  <div class="col-md-4">
                    <div class="form-group">
                        <div class="col-sm-4">Total Pembayaran:</div>
                        <div class="col-sm-8">
                            <strong>Rp {{orderDetails.grandTotal|number}}</strong>
                        </div>
                    </div>
                  </div>
                  <div class="col-md-4">
                    <div class="form-group">
                        <div class="col-sm-5">Status Pembayaran:</div>
                        <div class="col-sm-7">
                            <span class="label label-success" *ngIf="orderDetails.paymentStatus =='success'">{{orderDetails.paymentStatus}}
                            </span>
                             <span class="label label-warning" *ngIf="orderDetails.paymentStatus =='pending'">{{orderDetails.paymentStatus}}
                             </span>
                        </div>
                    </div>
                  </div>
                  <div class="col-md-4">
                    <div class="form-group">
                        <div class="col-sm-4">Jenis Pembayaran:</div>
                        <div class="col-sm-8">
                            <strong>{{orderDetails.paymentType}}</strong>
                        </div>
                    </div>
                    </div>
                </form>
            </div>
         </div>
    </div>
</div>

<div class="panel">
    <div class="panel-heading">Produk yang dipesan</div>
    <div class="table-responsive">
        <table class="table table-hover table-bordered table-striped">
            <thead>
                <tr>
                    <th class="text-center">#</th>
                    <th class="text-center">Nama Produk</th>
                    <th class="text-center">Harga</th>
                    <th class="text-center">Kuantitas</th>   
                    <th class="text-center">Diskon</th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let data of orderDetails.cart; let i=index ">
                    <td class="text-center">{{i+1}}</td>
                    <td class="text-center"> {{data.item.title}}</td>
                    <td class="text-center">{{data.item.price.value |number}}</td>
                    <td class="text-center">{{data.item.itemQunatity}}</td>

                    <td *ngIf="isMitra()" class="text-center" >
                        <!-- {{data.itemTotalPrice |number}} -->
                        {{ (data.item.price.value - data.item.price.specialPriceMitra) * data.item.itemQunatity | number }}
                    </td>

                    <td *ngIf="isUser()" class="text-center" >
                        {{ data.item.price.value - data.item.price.specialPrice | number }}
                    </td>
                </tr>

                <!-- <tr>
                     <td colspan="3"></td>
                     <td class="text-right"><strong>Total :</strong></td>
                     <td class="text-center">Rp {{orderDetails.subTotal|number}}</td>
                  </tr> -->
                  <!-- <tr>
                     <td colspan="3"></td>
                     <td class="text-right"><strong>Diskon:</strong></td>
                     
                     <td class="text-center">
                        Rp {{orderDetails.deductedPrice|number}}
                    </td>
                  </tr> -->

                  <tr>
                     <td colspan="3"></td>
                     <td class="text-right"><strong>PPN (10%):</strong></td>
                     <td class="text-center">Rp {{orderDetails.tax|number}}</td>
                  </tr>  
                  <tr>
                     <td colspan="3"></td>
                     <td class="text-right"><strong>Jumlah Total :</strong></td>
                     <td class="text-center">Rp {{orderDetails.grandTotal|number}}</td>
                  </tr> 
            </tbody>    
        </table>
    </div>
    <div class="panel-footer">
        <div class="row ">
        </div>
     </div>
</div>
</div>
